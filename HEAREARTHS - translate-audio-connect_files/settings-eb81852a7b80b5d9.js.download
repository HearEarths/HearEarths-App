(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1225],{49e3:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[id]/settings",function(){return a(98639)}])},98639:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ec});var s=a(74848),r=a(96540),l=a(86715),i=a(13368),n=a.n(i),d=a(91106),c=a.n(d),o=a(46059),x=a(804),m=a(56191),g=a(62636),h=a(43442);function u(e){let{isOpen:t,onClose:a,onSubmit:l,error:i}=e,[n,d]=(0,r.useState)(""),c=async e=>{e.preventDefault(),await l(n)};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Add Custom Domain"}),(0,s.jsxs)("form",{onSubmit:c,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Domain"}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>d(e.target.value),placeholder:"example.com or app.example.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),i&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:i})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md",children:"Add Domain"})]})]})]})})}):null}var y=a(62935);function p(e){let{isOpen:t,onClose:a,domain:l}=e,{subdomain:i,domainName:n}=(0,y.i)(l),d=!i,[c,o]=(0,r.useState)({}),x=async(e,t)=>{try{await navigator.clipboard.writeText(e),o(e=>({...e,[t]:!0})),setTimeout(()=>{o(e=>({...e,[t]:!1}))},2e3)}catch(e){console.error("Failed to copy text:",e)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg max-w-lg w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-medium text-white mb-4",children:"DNS Instructions"}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-md p-4 mb-6",children:[(0,s.jsx)("p",{className:"text-gray-300 mb-4",children:"Add the following DNS record to your domain:"}),d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-lg font-medium text-white mb-2",children:"A Record:"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Name:"}),(0,s.jsxs)("div",{className:"flex items-center bg-gray-600 rounded",children:[(0,s.jsx)("p",{className:"text-white font-mono text-sm p-2 flex-1",children:"@"}),(0,s.jsx)("button",{onClick:()=>x("@","name"),className:"px-2 hover:text-gray-200 text-gray-400",children:c.name?(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Value:"}),(0,s.jsxs)("div",{className:"flex items-center bg-gray-600 rounded",children:[(0,s.jsx)("p",{className:"text-white font-mono text-sm p-2 flex-1 break-all",children:"52.6.250.82"}),(0,s.jsx)("button",{onClick:()=>x("52.6.250.82","value"),className:"px-2 hover:text-gray-200 text-gray-400",children:c.value?(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-lg font-medium text-white mb-2",children:"CNAME Record:"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Name:"}),(0,s.jsxs)("div",{className:"flex items-center bg-gray-600 rounded",children:[(0,s.jsx)("p",{className:"text-white font-mono text-sm p-2 flex-1 break-all",children:i.toLowerCase()}),(0,s.jsx)("button",{onClick:()=>x(i.toLowerCase(),"cname-name"),className:"px-2 hover:text-gray-200 text-gray-400",children:c["cname-name"]?(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Value:"}),(0,s.jsxs)("div",{className:"flex items-center bg-gray-600 rounded",children:[(0,s.jsx)("p",{className:"text-white font-mono text-sm p-2 flex-1 break-all",children:"cname.aiagentconnections.com"}),(0,s.jsx)("button",{onClick:()=>x("cname.aiagentconnections.com","cname-value"),className:"px-2 hover:text-gray-200 text-gray-400",children:c["cname-value"]?(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})]})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:a,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md px-6 py-2 text-sm transition-colors",children:"Close"})})]})})}):null}function b(e){let{isOpen:t,onClose:a,onConfirm:l,isCloning:i}=e,[n,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)("create");return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Clone Project"}),(0,s.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Create a copy of this project."}),(0,s.jsx)("div",{className:"space-y-4 mb-6",children:(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded",checked:n,onChange:e=>d(e.target.checked)}),(0,s.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Include chat history"})]})}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md",disabled:i,children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:()=>l(n,c),disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md flex items-center ".concat(i?"opacity-50 cursor-not-allowed":""),children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cloning Project..."]}):"Clone Project"})]})]})})}):null}function j(e){let{isOpen:t,onClose:a,onConfirm:l}=e,[i,n]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1),[o,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(n(""),c(!1),x(!1))},[t]);let m=async()=>{if(d){x(!0);try{await l()}finally{x(!1)}}};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-red-600 dark:text-red-400 mb-4",children:"Detach Supabase Project"}),(0,s.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:["This will remove the Supabase project connection from this application. The Supabase project itself will not be deleted. To confirm, please type ",(0,s.jsx)("strong",{children:"DETACH"})," below:"]}),(0,s.jsx)("input",{type:"text",value:i,onChange:e=>{let t=e.target.value;n(t),c("DETACH"===t)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white mb-4",placeholder:"Type DETACH to confirm",autoComplete:"off"}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md",disabled:o,children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:m,disabled:!d||o,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md ".concat(!d||o?"opacity-50 cursor-not-allowed":""),children:o?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Detaching..."]}):"Detach Project"})]})]})})}):null}function f(e){let{isOpen:t,onClose:a,onConfirm:l,isDeleting:i}=e,[n,d]=(0,r.useState)(""),[c,o]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{t&&(d(""),o(!1))},[t]),t)?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-red-600 dark:text-red-400 mb-4",children:"Delete Project"}),(0,s.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:["This action cannot be undone. To confirm, please type ",(0,s.jsx)("strong",{children:"DELETE"})," below:"]}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>{let t=e.target.value;d(t),o("DELETE"===t)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white mb-4",placeholder:"Type DELETE to confirm",autoComplete:"off"}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{d(""),o(!1),a()},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md",disabled:i,children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:l,disabled:!c||i,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md ".concat(!c||i?"opacity-50 cursor-not-allowed":""),children:i?"Deleting...":"Delete Project"})]})]})})}):null}function v(e){let{isOpen:t,onClose:a,currentTitle:l,onSubmit:i,error:n}=e,[d,c]=(0,r.useState)(l),[o,x]=(0,r.useState)(!1),[m,g]=(0,r.useState)();(0,r.useEffect)(()=>{t&&(c(l),g(void 0))},[t,l]);let h=async e=>{if(e.preventDefault(),g(void 0),!d||""===d.trim()){g("Title is required");return}if(d.length>100){g("Title must be 100 characters or less");return}try{x(!0),await i(d.trim())}catch(e){}finally{x(!1)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Edit Project Title"}),(0,s.jsxs)("form",{onSubmit:h,children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter project title",maxLength:100}),(0,s.jsxs)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[d.length,"/100 characters"]})]}),m&&(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:m}),n&&(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:n})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md ".concat(o?"opacity-70 cursor-not-allowed":""),children:o?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save"})]})]})]})})}):null}function k(e){let{isOpen:t,onClose:a,currentDescription:l,onSubmit:i,error:n}=e,[d,c]=(0,r.useState)(l),[o,x]=(0,r.useState)(!1),[m,g]=(0,r.useState)();(0,r.useEffect)(()=>{t&&(c(l),g(void 0))},[t,l]);let h=async e=>{if(e.preventDefault(),g(void 0),d.length>500){g("Description must be 500 characters or less");return}try{x(!0),await i(d.trim())}catch(e){}finally{x(!1)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Edit Project Description"}),(0,s.jsxs)("form",{onSubmit:h,children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter project description",rows:4,maxLength:500}),(0,s.jsxs)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[d.length,"/500 characters"]})]}),m&&(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:m}),n&&(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:n})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md ".concat(o?"opacity-70 cursor-not-allowed":""),children:o?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save"})]})]})]})})}):null}function N(e){let{projectData:t,subscriptionData:a,onProjectUpdate:i}=e,n=(0,l.useRouter)(),{id:d}=n.query,[c,o]=(0,r.useState)(!1),[y,N]=(0,r.useState)(!1),[w,C]=(0,r.useState)(""),[S,A]=(0,r.useState)(),[L,E]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),[F,D]=(0,r.useState)(!1),[M,z]=(0,r.useState)(!1),[O,B]=(0,r.useState)(!1),[I,U]=(0,r.useState)(!1),[_,R]=(0,r.useState)(!1),[W,q]=(0,r.useState)(!1),[V,H]=(0,r.useState)(!1),[J,K]=(0,r.useState)(!1),[Q,G]=(0,r.useState)(!1),[Y,X]=(0,r.useState)(!1),[$,Z]=(0,r.useState)(""),[ee,et]=(0,r.useState)(!1),[ea,es]=(0,r.useState)(!1),[er,el]=(0,r.useState)(!1),[ei,en]=(0,r.useState)(!1),[ed,ec]=(0,r.useState)(),[eo,ex]=(0,r.useState)(),{isWhitelabel:em,whitelabelConfig:eg}=(0,h.p)();(0,r.useEffect)(()=>{(null==t?void 0:t.shareToken)?Z("".concat(window.location.origin,"/share/").concat(t.id,"?token=").concat(t.shareToken)):Z("")},[t]);let eh=(0,r.useCallback)(async e=>{try{if(!e||!e.trim()||!e.includes(".")){g.Ay.error("Please enter a valid domain");return}let t=await fetch("/api/projects/domains",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:d,domain:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to add domain")}await i(),o(!1)}catch(e){g.Ay.error(e.message||"Failed to add domain")}},[d,i]);(0,r.useEffect)(()=>{let e=async e=>{let t=e.detail;console.log("Entri closed with details:",t),t.success&&t.domain?await eh(t.domain):!t.success&&t.domain&&g.Ay.error("Domain setup was not completed. Please try again.")};return window.addEventListener("onEntriClose",e,!1),()=>{window.removeEventListener("onEntriClose",e,!1)}},[eh]);let eu=async()=>{if(d)try{P(!0);let e=await fetch("/api/projects/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete project")}n.push("/")}catch(e){console.error("Error deleting project:",e),alert("Failed to delete project: ".concat(e.message))}finally{P(!1),es(!1)}},ey=async()=>{if(!d)return;let e=null;try{R(!0),e=g.Ay.loading("Detaching Supabase project...");let t=await fetch("/api/projects/supabase",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:d})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to detach Supabase project")}g.Ay.success("Supabase project detached successfully",{id:e||void 0}),U(!1),await i()}catch(t){console.error("Error detaching Supabase project:",t),g.Ay.error("Error: ".concat(t.message),{id:e||void 0})}finally{R(!1)}},ep=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"create";if(d)try{H(!0);let a=await fetch("/api/projects/clone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,includeHistory:e,supabaseOption:t})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to clone project")}let s=await a.json();g.Ay.success("Project cloned successfully!"),n.push("/project/".concat(s.project._id))}catch(e){console.error("Error cloning project:",e),g.Ay.error("Failed to clone project: ".concat(e.message))}finally{H(!1),q(!1)}},eb=async e=>{let t=null;try{K(!0),t=g.Ay.loading("Updating sharing settings...");let a=await fetch("/api/projects/sharing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,allowSharing:e})});if(!a.ok)throw Error("Failed to update sharing settings");let s=await a.json();s.project.shareToken&&Z("".concat(window.location.origin,"/share/").concat(s.project._id,"?token=").concat(s.project.shareToken)),g.Ay.success("Sharing settings updated successfully",{id:t||void 0}),await i()}catch(e){console.error("Error updating sharing settings:",e),g.Ay.error("Failed to update sharing settings",{id:t||void 0})}finally{K(!1)}},ej=async e=>{let t=null;try{G(!0),t=g.Ay.loading("Updating pinning settings...");let a=await fetch("/api/projects/pinning",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,isPinned:e})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update pinning settings")}g.Ay.success("Pinning settings updated successfully",{id:t||void 0}),await i()}catch(e){console.error("Error updating pinning settings:",e),g.Ay.error(e.message||"Failed to update pinning settings",{id:t||void 0})}finally{G(!1)}},ef=async e=>{let t=null;try{X(!0),t=g.Ay.loading("Updating sleep mode...");let a=await fetch("/api/projects/sleep",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,isSleeping:e})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update sleep mode")}g.Ay.success("Sleep mode updated successfully",{id:t||void 0}),await i()}catch(e){console.error("Error updating sleep mode:",e),g.Ay.error(e.message||"Failed to update sleep mode",{id:t||void 0})}finally{X(!1)}},ev=async()=>{let e=null;try{if(J||!confirm("Are you sure you want to generate a new share link? Generating a new token will invalidate any previously shared links."))return;K(!0),e=g.Ay.loading("Generating new share link...");let t=await fetch("/api/projects/sharing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,allowSharing:!0,generateNewToken:!0})});if(!t.ok)throw Error("Failed to generate new share link");let a=await t.json();a.project.allowSharing&&a.project.shareToken&&Z("".concat(window.location.origin,"/share/").concat(a.project._id,"?token=").concat(a.project.shareToken)),g.Ay.success("New share link generated successfully",{id:e||void 0}),await i()}catch(t){console.error("Error generating new share link:",t),g.Ay.error("Failed to generate new share link",{id:e||void 0})}finally{K(!1)}},ek=async()=>{if($)try{await navigator.clipboard.writeText($),et(!0),setTimeout(()=>{et(!1)},2e3),g.Ay.success("Share URL copied to clipboard!")}catch(e){console.error("Failed to copy:",e),g.Ay.error("Failed to copy URL")}},eN=async e=>{try{ec(void 0);let t=await fetch("/api/projects/update-title",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,title:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update title")}g.Ay.success("Project title updated successfully!"),el(!1),await i()}catch(e){ec(e.message)}},ew=async e=>{try{ex(void 0);let t=await fetch("/api/projects/update-description",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,description:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update description")}g.Ay.success("Project description updated successfully!"),en(!1),await i()}catch(e){ex(e.message)}},eC=async()=>{(null==t?void 0:t.userTier)&&t.userTier!==x.i.FREE?o(!0):D(!0)},eS=e=>{if((!(null==t?void 0:t.userTier)||t.userTier===x.i.FREE)&&!1===e){D(!0);return}eA(e)},eA=async e=>{let t=null;try{z(!0),t=g.Ay.loading("Updating badge settings...");let a=await fetch("/api/projects/badge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,showBadge:e})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update badge settings")}e?g.Ay.success("Badge shown successfully!",{id:t,duration:5e3}):g.Ay.success("Badge hidden successfully!",{id:t,duration:5e3}),await i()}catch(e){console.error("Error updating badge settings:",e),g.Ay.error(e.message||"Failed to update badge settings",{id:t||void 0})}finally{z(!1)}},eL=e=>{if((!(null==t?void 0:t.userTier)||t.userTier===x.i.FREE)&&!1===e){D(!0);return}eE(e)},eE=async e=>{let t=null;try{if(B(!0),t=g.Ay.loading("Updating visibility settings..."),!(await fetch("/api/projects/set-public",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,isPublic:e})})).ok)throw Error("Failed to update visibility settings");e?g.Ay.success("Project is now public.",{id:t}):g.Ay.success("Project is now private.",{id:t}),await i()}catch(e){console.error("Error updating visibility settings:",e),g.Ay.error("Failed to update visibility settings",{id:t||void 0})}finally{B(!1)}},eT=e=>{C(e),N(!0)};return t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-xl font-medium text-gray-900 dark:text-white mb-4",children:"Basic Settings"}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center mb-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Project Title"}),(0,s.jsx)("button",{onClick:()=>el(!0),className:"ml-3 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Edit"})]}),(0,s.jsx)("div",{className:"text-gray-900 dark:text-white",children:t.title||"No title set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Slug"}),(0,s.jsx)("div",{className:"text-gray-900 dark:text-white",children:t.slug||"No slug available"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created At"}),(0,s.jsx)("div",{className:"text-gray-900 dark:text-white",children:t.createdAt?new Date(t.createdAt).toLocaleString():"Unknown"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Updated At"}),(0,s.jsx)("div",{className:"text-gray-900 dark:text-white",children:t.updatedAt?new Date(t.updatedAt).toLocaleString():"Unknown"})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Project Description"}),(0,s.jsx)("button",{onClick:()=>en(!0),className:"ml-3 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Edit"})]}),(0,s.jsx)("div",{className:"text-gray-900 dark:text-white",children:t.description||"No description provided"})]}),t.supabaseProjectId&&!0!==t.isInternalSupabase&&!0!==t.isInternalDatabase&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Supabase Project"}),(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-100 dark:bg-gray-600 p-3 rounded-md border border-gray-200 dark:border-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,s.jsx)("a",{href:"https://supabase.com/dashboard/project/".concat(t.supabaseProjectId),target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline font-medium",children:t.supabaseProjectId})]}),(0,s.jsx)("button",{onClick:()=>U(!0),className:"px-3 py-1 bg-red-50 text-red-500 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 dark:text-red-400 rounded-md text-sm font-medium transition-colors",children:"Detach"})]}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Supabase provides backend storage, functionality, and authentication for your application."})]})]})]}),"mobile"!==t.platform&&(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-xl font-medium text-gray-900 dark:text-white mb-4",children:"Domains"}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[("live"===t.status||"completed"===t.status)&&(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-100 dark:bg-gray-600 p-2 rounded",children:[(0,s.jsxs)("span",{className:"text-gray-900 dark:text-gray-100",children:[t.slug,".","deploypad.app"]}),(0,s.jsx)("button",{onClick:()=>window.open("https://".concat(t.slug,".").concat("deploypad.app"),"_blank"),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]}),t.domains&&t.domains.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-100 dark:bg-gray-600 p-2 rounded",children:[(0,s.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:e}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("button",{onClick:()=>eT(e),className:"text-gray-300 dark:text-gray-300 hover:text-gray-200 dark:hover:text-gray-200 text-sm border border-gray-300 dark:border-gray-500 rounded px-2 py-0.5",children:"Instructions"}),(0,s.jsx)("button",{onClick:async()=>{try{if(!confirm("Are you sure you want to remove ".concat(e,"?")))return;if(!(await fetch("/api/projects/domains?projectId=".concat(d,"&domain=").concat(e),{method:"DELETE"})).ok)throw Error("Failed to remove domain");await i()}catch(e){console.error("Error deleting domain:",e)}},className:"text-gray-300 dark:text-gray-300 hover:text-gray-200 dark:hover:text-gray-200 text-sm border border-gray-300 dark:border-gray-500 rounded px-2 py-0.5",children:"Remove"}),(0,s.jsx)("button",{onClick:()=>window.open("https://".concat(e),"_blank"),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})]},e))]}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-4",children:[(0,s.jsx)("button",{onClick:eC,disabled:L,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:L?"Please wait...":em?"Add a domain":"Add a domain you own"}),!em&&(0,s.jsx)("button",{onClick:()=>window.open("https://app.deal.ai/domains","_blank"),className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md text-sm transition-colors",children:"Buy a domain"})]})]})]}),"mobile"!==t.platform&&(0,s.jsxs)("section",{children:[(0,s.jsxs)("h2",{className:"text-xl font-medium text-gray-900 dark:text-white mb-4",children:[em?(null==eg?void 0:eg.siteName)||"":"Famous.ai"," ","Badge"]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Change the visibility of the 'Built on"," ",em?(null==eg?void 0:eg.siteName)||"":"Famous.ai","' badge on your published site."]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"hide-badge",name:"badge-visibility",type:"radio",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600",checked:!1===t.showBadge,disabled:M,onChange:()=>eS(!1)}),(0,s.jsx)("label",{htmlFor:"hide-badge",className:"ml-3 block text-gray-700 dark:text-gray-300",children:"Hide badge"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"show-badge",name:"badge-visibility",type:"radio",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600",checked:!1!==t.showBadge,disabled:M,onChange:()=>eS(!0)}),(0,s.jsx)("label",{htmlFor:"show-badge",className:"ml-3 block text-gray-700 dark:text-gray-300",children:"Show badge"})]})]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-xl font-medium text-gray-900 dark:text-white mb-4",children:"Project Visibility"}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Public projects can be featured on the ",em?"".concat((null==eg?void 0:eg.siteName)?"".concat(eg.siteName):"platform"):"Famous.ai"," homepage, giving you extra visibility and helping more people discover your work. You can switch between public and private at any time."]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"private-project",name:"project-visibility",type:"radio",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600",checked:!1===t.isPublic,disabled:O,onChange:()=>eL(!1)}),(0,s.jsx)("label",{htmlFor:"private-project",className:"ml-3 block text-gray-700 dark:text-gray-300",children:"Private project"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"public-project",name:"project-visibility",type:"radio",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600",checked:!1!==t.isPublic,disabled:O,onChange:()=>eL(!0)}),(0,s.jsx)("label",{htmlFor:"public-project",className:"ml-3 block text-gray-700 dark:text-gray-300",children:"Public project"})]})]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-xl font-medium text-gray-900 dark:text-white mb-4",children:"Clone Project"}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Create a copy of this project."}),(0,s.jsx)("button",{onClick:()=>q(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md text-sm transition-colors",children:"Clone this project"})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-xl font-medium text-gray-900 dark:text-white mb-4",children:"Project Sharing"}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Allow others to clone this project using a shareable link."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:!0===t.allowSharing,disabled:J,onChange:e=>eb(e.target.checked)}),(0,s.jsx)("div",{className:"relative w-11 h-6 bg-gray-600 dark:bg-gray-400 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:t.allowSharing?"Sharing Enabled":"Sharing Disabled"})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Shareable Link"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("input",{type:"text",readOnly:!0,value:$,className:"flex-1 bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-3 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 focus:outline-none ".concat(t.allowSharing?"":"opacity-50")}),(0,s.jsx)("button",{onClick:ek,className:"bg-gray-200 dark:bg-gray-500 hover:bg-gray-300 dark:hover:bg-gray-400 px-3 py-2 rounded-r-md border-t border-r border-b border-gray-300 dark:border-gray-600 ".concat(t.allowSharing?"":"opacity-50"),disabled:!$||!t.allowSharing,children:ee?(0,s.jsx)("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:ev,disabled:J||!t.allowSharing,className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium ".concat(t.allowSharing?"":"opacity-50 cursor-not-allowed"),children:"Generate new share link"})})]})]})]})]}),!em&&(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-xl font-medium text-gray-900 dark:text-white mb-4",children:"Pin to White Label"}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Pin this project to your white label site, so your users can see and clone it from their dashboard."}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:!!t.pinnedAt,disabled:Q,onChange:e=>ej(e.target.checked)}),(0,s.jsx)("div",{className:"relative w-11 h-6 bg-gray-600 dark:bg-gray-400 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:t.pinnedAt?"Pinned":"Not Pinned"})]})})})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-xl font-medium text-gray-900 dark:text-white mb-4",children:"Sleep Mode"}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"If you are not using a project, put it to sleep so it doesn't use compute resources."}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:!0===t.isSleeping,disabled:Y,onChange:e=>ef(e.target.checked)}),(0,s.jsx)("div",{className:"relative w-11 h-6 bg-gray-600 dark:bg-gray-400 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:!0===t.isSleeping?"Sleeping":"Not Sleeping"})]})})})]})]}),(0,s.jsx)("div",{className:"flex justify-end mt-8 border-t dark:border-gray-700 pt-6",children:(0,s.jsxs)("button",{className:"text-red-500 hover:text-red-600 text-sm font-medium flex items-center",onClick:()=>es(!0),children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Project"]})})]}),F&&a&&(0,s.jsx)(m.A,{isOpen:F,onClose:()=>D(!1),currentTier:a.tier,currentUsage:a.messageCount,currentLimit:a.limit,subscriptionData:a}),c&&(0,s.jsx)(u,{isOpen:c,onClose:()=>{o(!1),A(void 0)},onSubmit:eh,error:S}),y&&(0,s.jsx)(p,{isOpen:y,onClose:()=>N(!1),domain:w}),I&&(0,s.jsx)(j,{isOpen:I,onClose:()=>U(!1),onConfirm:ey}),W&&(0,s.jsx)(b,{isOpen:W,onClose:()=>q(!1),onConfirm:ep,isCloning:V,supabaseProjectId:null==t?void 0:t.supabaseProjectId}),ea&&(0,s.jsx)(f,{isOpen:ea,onClose:()=>es(!1),onConfirm:eu,isDeleting:T}),er&&(0,s.jsx)(v,{isOpen:er,onClose:()=>{el(!1),ec(void 0)},currentTitle:(null==t?void 0:t.title)||"",onSubmit:eN,error:ed}),ei&&(0,s.jsx)(k,{isOpen:ei,onClose:()=>{en(!1),ex(void 0)},currentDescription:(null==t?void 0:t.description)||"",onSubmit:ew,error:eo})]}):null}function w(e){let{projectData:t,onProjectUpdate:a}=e,{id:i}=(0,l.useRouter)().query,[n,d]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)("30d"),[y,p]=(0,r.useState)(!1),[b,j]=(0,r.useState)(null),[f,v]=(0,r.useState)({x:0,y:0}),k=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/projects/".concat(i,"/analytics?range=").concat(h));if(!e.ok)throw Error("Failed to fetch analytics data");let t=await e.json();o(t),d(!1)}catch(e){console.error("Error fetching analytics:",e),m("Could not load analytics data"),d(!1)}},[i,h]);(0,r.useEffect)(()=>{i&&k()},[i,k]);let N=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString(),w=e=>{let t=e>0?"+":"";return"".concat(t).concat(e,"%")},C=(e,t,a)=>{let s=window.innerWidth,r=e.clientX,l=e.clientY,i=r;r+100>s-10?i=r-100:r-100<10&&(i=110),v({x:i,y:l-60-5}),j({index:t,data:a})},S=(e,t,a)=>{if(b&&b.index===t){let t=window.innerWidth,a=e.clientX,s=e.clientY,r=a;a+100>t-10?r=a-100:a-100<10&&(r=110),v({x:r,y:s-60-5})}},A=()=>{j(null)},L=(e,t)=>{if(!e||0===e.length)return[];let a=new Date,s=[];for(let e=("7d"===t?7:"90d"===t?90:30)-1;e>=0;e--){let t=new Date(a);t.setDate(t.getDate()-e),s.push(t.toISOString().split("T")[0])}let r=new Map;return e.forEach(e=>{r.set(e.date,e)}),s.map(e=>r.has(e)?r.get(e):{date:e,visitors:0,pageviews:0})},E=async e=>{if(!e&&!confirm("Are you sure you want to disable analytics collection? This will stop collecting visitor data for this project. You can re-enable it later."))return;let t=null;try{p(!0),t=g.Ay.loading("Updating analytics collection...");let s=await fetch("/api/projects/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i,includeEvents:e})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to update analytics collection setting")}e?g.Ay.success("Analytics collection enabled successfully!",{id:t,duration:5e3}):g.Ay.success("Analytics collection disabled successfully!",{id:t,duration:5e3}),await a()}catch(e){console.error("Error updating analytics collection setting:",e),g.Ay.error(e.message||"Failed to update analytics collection setting",{id:t||void 0})}finally{p(!1)}};return n?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("svg",{className:"animate-spin h-10 w-10 text-blue-500 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("p",{className:"text-gray-300",children:"Loading analytics..."})]})}):x?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-red-500 mb-4",children:(0,s.jsx)("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,s.jsx)("p",{className:"text-gray-300 text-xl font-medium mb-4",children:x})]}):t?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between ".concat(t&&new Date(t.createdAt)<new Date("2025-06-15")?"mb-2":""),children:[(0,s.jsx)("h2",{className:"text-xl font-medium text-gray-900 dark:text-white mb-4 sm:mb-0",children:"Analytics Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Time range:"}),(0,s.jsxs)("select",{value:h,onChange:e=>u(e.target.value),className:"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,s.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,s.jsx)("option",{value:"90d",children:"Last 90 days"})]})]})]}),t&&new Date(t.createdAt)<new Date("2025-06-15")&&(0,s.jsx)("div",{className:"mb-4 flex justify-end",children:(0,s.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[(0,s.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Analytics collection started Jun 15, 2025"]})}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Visitors"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:N(c.summary.totalVisitors)})]}),(0,s.jsx)("div",{className:"text-sm font-medium ".concat(c.summary.visitorsChange>=0?"text-green-600":"text-red-600"),children:w(c.summary.visitorsChange)})]})}),(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pageviews"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:N(c.summary.totalPageviews)})]}),(0,s.jsx)("div",{className:"text-sm font-medium ".concat(c.summary.pageviewsChange>=0?"text-green-600":"text-red-600"),children:w(c.summary.pageviewsChange)})]})}),(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Avg Session Duration"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(e=>{if(e<60)return"".concat(Math.round(e),"s");let t=Math.floor(e/60),a=Math.round(e%60);return"".concat(t,"m ").concat(a,"s")})(c.summary.avgSessionDuration)})]}),(0,s.jsx)("div",{className:"text-sm font-medium ".concat(c.summary.sessionDurationChange>=0?"text-green-600":"text-red-600"),children:w(c.summary.sessionDurationChange)})]})}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Live pageviews"})]})}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:c.summary.livePageviews})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"New Users"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:N(c.summary.newUsers)}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:c.summary.totalVisitors>0?"".concat(Math.round(c.summary.newUsers/c.summary.totalVisitors*100),"% of total"):"0% of total"})]}),(0,s.jsx)("div",{className:"text-sm font-medium ".concat(c.summary.newUsersChange>=0?"text-green-600":"text-red-600"),children:w(c.summary.newUsersChange)})]})}),(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Returning Users"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:N(c.summary.returningUsers)}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:c.summary.totalVisitors>0?"".concat(Math.round(c.summary.returningUsers/c.summary.totalVisitors*100),"% of total"):"0% of total"})]}),(0,s.jsx)("div",{className:"text-sm font-medium ".concat(c.summary.returningUsersChange>=0?"text-green-600":"text-red-600"),children:w(c.summary.returningUsersChange)})]})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow mb-8",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Visitors Over Time"}),(0,s.jsxs)("div",{className:"h-80 relative",children:[(0,s.jsx)("div",{className:"h-full flex items-end justify-between relative",children:(()=>{let e=L(c.chartData,h),t=Math.max(...e.map(e=>e.visitors),1);return e.map((e,a)=>{let r=Math.max(e.visitors/t*200,2),l=e.visitors>0;return(0,s.jsxs)("div",{className:"flex flex-col items-center relative flex-1 min-w-0",children:[l&&(0,s.jsx)("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1 absolute -top-6",children:N(e.visitors)}),(0,s.jsx)("div",{className:"bg-blue-500 hover:bg-blue-600 w-full rounded-t transition-colors cursor-pointer mx-px",style:{height:"".concat(r,"px")},onMouseEnter:t=>C(t,a,e),onMouseMove:t=>S(t,a,e),onMouseLeave:A}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 whitespace-nowrap transform -rotate-45 origin-center",children:[new Date(e.date).getMonth()+1,"/",new Date(e.date).getDate()]})]},a)})})()}),b&&(0,s.jsxs)("div",{className:"absolute z-10 bg-gray-900 dark:bg-gray-800 text-white text-sm rounded-lg p-3 shadow-lg border border-gray-700 pointer-events-none max-w-48 whitespace-nowrap",style:{left:f.x,top:f.y,transform:"translate(-50%, -100%)"},children:[(0,s.jsx)("div",{className:"font-medium",children:new Date(b.data.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),(0,s.jsxs)("div",{className:"text-blue-300",children:[b.data.visitors," visitor",1===b.data.visitors?"":"s"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Referrals"}),(0,s.jsx)("div",{className:"space-y-3",children:c.referrals.slice(0,10).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center flex-1",children:(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:e.source})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.percentage,"%"]}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N(e.visitors)})]})]},t))})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Pages"}),(0,s.jsx)("div",{className:"space-y-3",children:c.pages.slice(0,10).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center flex-1",children:(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white truncate",children:e.path})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.percentage,"%"]}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N(e.visitors)})]})]},t))})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Devices"}),(0,s.jsx)("div",{className:"space-y-3",children:c.devices.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center flex-1",children:(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white capitalize",children:e.type})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.percentage,"%"]}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N(e.visitors)})]})]},t))})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Countries"}),(0,s.jsx)("div",{className:"space-y-3",children:c.countries.slice(0,10).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center flex-1",children:(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:e.country})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.percentage,"%"]}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N(e.visitors)})]})]},t))})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Browsers"}),(0,s.jsx)("div",{className:"space-y-3",children:c.browsers.slice(0,10).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center flex-1",children:(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:e.browser})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.percentage,"%"]}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N(e.visitors)})]})]},t))})]})]}),(0,s.jsx)("div",{className:"mt-12 pt-8 border-t border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Toggle Analytics"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Control whether analytics data is collected for this project."}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:(null==t?void 0:t.includeEvents)!==!1,disabled:y,onChange:e=>E(e.target.checked)}),(0,s.jsx)("div",{className:"relative w-11 h-6 bg-gray-600 dark:bg-gray-400 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:(null==t?void 0:t.includeEvents)!==!1?"Analytics Collection Enabled":"Analytics Collection Disabled"})]})}),(null==t?void 0:t.includeEvents)===!1&&(0,s.jsx)("div",{className:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,s.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Analytics collection is disabled. No new data will be collected until re-enabled."})]})})]})})]})]}):null}var C=a(59140),S=a(79753),A=a(78196),L=a(94909),E=a(68530),T=a(41764),P=a(82995),F=a(97665),D=a(65251),M=a(82309);let z=a(94335).A.create({baseURL:"/api/databasepad/proxy"});function O(){let e=(0,F.jE)();return{useApiQuery:(e,t,a)=>(0,D.I)({queryKey:[e,t],queryFn:async()=>(await z.get("",{params:{projectId:e,endpoint:t}})).data,...a}),useApiMutation:function(t,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return(0,M.n)({mutationFn:async e=>(await z({method:s,url:"",data:e,params:{projectId:t,endpoint:a}})).data,onSuccess:()=>{e.invalidateQueries({queryKey:[t]})}})},useDbQuery:e=>(0,M.n)({mutationFn:async t=>{let{query:a,params:s}=t;return(await z.post("",{query:a,params:s},{params:{projectId:e,endpoint:"query"}})).data}})}}var B=a(49643),I=a(93601),U=a(76897);function _(e){var t,a,l,i,n,d,c,o;let{projectId:x}=e,{useDbQuery:m}=O(),[g,h]=(0,r.useState)([]),[u,y]=(0,r.useState)(null),[p,b]=(0,r.useState)(null),[j,f]=(0,r.useState)(""),[v,k]=(0,r.useState)(null),[N,w]=(0,r.useState)(!0),[C,S]=(0,r.useState)(!1),[A,L]=(0,r.useState)(null),[E,T]=(0,r.useState)(!1),[P,F]=(0,r.useState)(!1),D=m(x);(0,r.useEffect)(()=>{M()},[x]);let M=async()=>{w(!0),L(null);try{var e;let t=await fetch("/api/databasepad/proxy?endpoint=projects/".concat(x,"/tables"));if(!t.ok)throw Error("Failed to fetch tables");let a=await t.json(),s=(null===(e=a.tables)||void 0===e?void 0:e.map(e=>({schema:e.table_schema,name:e.table_name,rls_enabled:!1,columns:e.columns})))||[];h(s)}catch(e){L(e.message||"Failed to fetch tables")}finally{w(!1)}},z=async e=>{S(!0),L(null);try{var t,a;let s=u&&(null===(t=g.find(t=>t.name===e))||void 0===t?void 0:t.schema)?"".concat(null===(a=g.find(t=>t.name===e))||void 0===a?void 0:a.schema,".").concat(e):e,r=await D.mutateAsync({query:"SELECT * FROM ".concat(s," LIMIT 100")});b(r)}catch(e){L(e.message||"Failed to fetch table data")}finally{S(!1)}},_=async()=>{if(j.trim()){L(null);try{let e=await D.mutateAsync({query:j});k(e)}catch(a){var e,t;L((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.details)||a.message||"Query failed")}}},R=e=>{y(e),b(null),k(null),z(e),F(!0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"Database"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"View and manage the data stored in your app."})]}),(0,s.jsxs)("button",{onClick:()=>T(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,s.jsx)(B.A,{size:16}),"SQL Editor"]})]}),A&&(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded",children:A}),N?(0,s.jsx)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading tables..."}):0===g.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(I.A,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No tables found"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Create tables in your database to see them here"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(e=>(0,s.jsxs)("div",{onClick:()=>R(e.name),className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(I.A,{className:"text-blue-600 dark:text-blue-400",size:24}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name})]})}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Click to view table data"}),e.rls_enabled&&(0,s.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" RLS Enabled"})]},e.name))})]}),E&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"SQL Editor"}),(0,s.jsx)("button",{onClick:()=>{T(!1),f(""),k(null)},className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(U.A,{size:20})})]}),(0,s.jsxs)("div",{className:"p-6 flex-1 overflow-auto",children:[(0,s.jsx)("textarea",{value:j,onChange:e=>f(e.target.value),className:"w-full h-40 font-mono text-sm p-3 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"-- Write your SQL query here -- Example: SELECT * FROM profiles LIMIT 10 -- Note: 'public' schema references are automatically translated",autoFocus:!0}),(0,s.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Use standard PostgreSQL syntax. Auth tables are available as auth.users, etc."}),(0,s.jsx)("button",{onClick:_,disabled:!j.trim()||D.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:D.isPending?"Running...":"Run Query"})]}),v&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Query Results"}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[v.rowCount," rows"]})]}),(0,s.jsx)("div",{className:"overflow-x-auto max-h-[400px] overflow-y-auto border dark:border-gray-700 rounded-lg",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:(0,s.jsx)("tr",{children:null===(t=v.fields)||void 0===t?void 0:t.map(e=>(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:e.name},e.name))})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:(null===(a=v.rows)||void 0===a?void 0:a.length)===0?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:(null===(l=v.fields)||void 0===l?void 0:l.length)||1,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No data found"})}):null===(i=v.rows)||void 0===i?void 0:i.map((e,t)=>{var a;return(0,s.jsx)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:null===(a=v.fields)||void 0===a?void 0:a.map(t=>(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:null===e[t.name]?(0,s.jsx)("span",{className:"text-gray-400 dark:text-gray-500 italic",children:"NULL"}):"object"==typeof e[t.name]?(0,s.jsx)("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded",children:JSON.stringify(e[t.name])}):String(e[t.name])},t.name))},t)})})]})})]})]})]})}),P&&u&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Table: ",u]}),(0,s.jsx)("button",{onClick:()=>{F(!1),y(null),b(null)},className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(U.A,{size:20})})]}),(0,s.jsx)("div",{className:"p-6 flex-1 overflow-auto",children:C?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading data..."}):p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing first ",p.rows.length," rows"]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total: ",p.rowCount," rows"]})]}),(0,s.jsx)("div",{className:"overflow-x-auto border dark:border-gray-700 rounded-lg",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,s.jsx)("tr",{children:null===(n=p.fields)||void 0===n?void 0:n.map(e=>(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:e.name},e.name))})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:(null===(d=p.rows)||void 0===d?void 0:d.length)===0?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:(null===(c=p.fields)||void 0===c?void 0:c.length)||1,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No data found"})}):null===(o=p.rows)||void 0===o?void 0:o.map((e,t)=>{var a;return(0,s.jsx)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:null===(a=p.fields)||void 0===a?void 0:a.map(t=>(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:null===e[t.name]?(0,s.jsx)("span",{className:"text-gray-400 dark:text-gray-500 italic",children:"NULL"}):"object"==typeof e[t.name]?(0,s.jsx)("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded",children:JSON.stringify(e[t.name])}):String(e[t.name])},t.name))},t)})})]})})]})})]})})]})}var R=a(98097),W=a(90708),q=a(83004);function V(e){let{projectId:t}=e,{useApiQuery:a,useApiMutation:l}=O(),[i,n]=(0,r.useState)(null),[d,c]=(0,r.useState)([]),[o,x]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[h,u]=(0,r.useState)(""),[y,p]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1),{data:f,isLoading:v,refetch:k}=a(t,"projects/".concat(t,"/buckets"),{queryKey:["projects/".concat(t,"/buckets")]}),N=(null==f?void 0:f.buckets)||[],w=l(t,"buckets/create");(0,r.useEffect)(()=>{i&&b&&C(i)},[i,b]);let C=async e=>{x(!0);try{let a=await fetch("/api/databasepad/proxy?projectId=".concat(t,"&endpoint=buckets/").concat(e,"/files")),s=await a.json();c(s.files||[])}catch(e){console.error("Failed to fetch files:",e),c([])}finally{x(!1)}},A=async()=>{if(h.trim())try{await w.mutateAsync({projectId:t,bucketName:h,public:y}),u(""),p(!1),g(!1),k()}catch(t){var e,a;alert((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.error)||"Failed to create bucket")}},L=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},E=e=>{n(e),j(!0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"File Buckets"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your buckets and files. Create public or private buckets for different types of content."})]}),(0,s.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,s.jsx)(R.A,{size:16}),"New Bucket"]})]}),m&&(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Create New Bucket"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",value:h,onChange:e=>u(e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")),placeholder:"bucket-name",className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:y,onChange:e=>p(e.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Public bucket (files can be accessed without authentication)"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:A,disabled:!h.trim()||w.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:w.isPending?"Creating...":"Create Bucket"}),(0,s.jsx)("button",{onClick:()=>{g(!1),u(""),p(!1)},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"})]})]})]}),v?(0,s.jsx)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading buckets..."}):N&&0!==N.length?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(e=>(0,s.jsxs)("div",{onClick:()=>E(e.name),className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(S.A,{className:"text-blue-600 dark:text-blue-400",size:24}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name})]})}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Click to view files"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(e.public?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-400"),children:e.public?"Public":"Private"})})]},e.name))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(S.A,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No buckets yet"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Create your first bucket to start storing files"})]})]}),b&&i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Files in ",i]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1.5 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:[(0,s.jsx)(W.A,{size:16}),"Upload File"]}),(0,s.jsx)("button",{onClick:()=>{j(!1),n(null),c([])},className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(U.A,{size:20})})]})]}),(0,s.jsx)("div",{className:"p-6 flex-1 overflow-auto",children:o?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading files..."}):0===d.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(S.A,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No files in this bucket"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Upload files to get started"})]}):(0,s.jsx)("div",{className:"overflow-x-auto border dark:border-gray-700 rounded-lg",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Size"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Last Modified"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:L(e.size)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.lastModified).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:(0,s.jsx)("button",{className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:(0,s.jsx)(q.A,{size:16})})})]},e.name))})]})})})]})})]})}function H(e){var t,a,l,i,n,d,c,o;let{projectId:x}=e,{useApiQuery:m,useApiMutation:g}=O(),[h,u]=(0,r.useState)({}),[y,p]=(0,r.useState)(!1),b=g(x,"auth/settings","POST"),[j,f]=(0,r.useState)(!0),[v,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{f(!0);let e=await b.mutateAsync({action:"get"});k(e.settings),u(e.settings)}catch(t){console.error("Failed to load auth settings:",t);let e={confirmSignup:!0,smtp:{host:"",port:587,user:"",pass:"",from:"noreply@testdatabasepad.com"},emailTemplates:{signup:"Welcome! Please confirm your email.",reset:"Click here to reset your password.",invite:"You have been invited!"}};k(e),u(e)}finally{f(!1)}})()},[x,b]);let N=g(x,"auth/settings","POST"),w=(e,t)=>{u(a=>{let s={...a},r=e.split("."),l=s;for(let e=0;e<r.length-1;e++)l[r[e]]||(l[r[e]]={}),l=l[r[e]];return l[r[r.length-1]]=t,s}),p(!0)},C=async()=>{try{let e=await N.mutateAsync({action:"update",settings:h});k(e.settings),u(e.settings),p(!1),alert("Settings saved successfully!")}catch(a){var e,t;alert((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to save settings")}};return j?(0,s.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading authentication settings..."}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"Authentication"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure authentication settings for your project. These settings control how users sign up and sign in."})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"General Settings"})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"checkbox",checked:!h.confirmSignup,onChange:e=>w("confirmSignup",!e.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:"Disable new user signups"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 ml-6 mt-1",children:"When enabled, new users cannot sign up. Only existing users can sign in."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"checkbox",checked:h.confirmSignup||!1,onChange:e=>w("confirmSignup",e.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:"Require email confirmation"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 ml-6 mt-1",children:"New users must verify their email address before they can sign in."})]})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Email Settings (SMTP)"})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Host"}),(0,s.jsx)("input",{type:"text",value:(null===(t=h.smtp)||void 0===t?void 0:t.host)||"",onChange:e=>w("smtp.host",e.target.value),className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"smtp.gmail.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Port"}),(0,s.jsx)("input",{type:"number",value:(null===(a=h.smtp)||void 0===a?void 0:a.port)||587,onChange:e=>w("smtp.port",parseInt(e.target.value)),className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Username"}),(0,s.jsx)("input",{type:"text",value:(null===(l=h.smtp)||void 0===l?void 0:l.user)||"",onChange:e=>w("smtp.user",e.target.value),className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"your-email@gmail.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Password"}),(0,s.jsx)("input",{type:"password",value:(null===(i=h.smtp)||void 0===i?void 0:i.pass)||"",onChange:e=>w("smtp.pass",e.target.value),className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:""})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Address"}),(0,s.jsx)("input",{type:"text",value:(null===(n=h.smtp)||void 0===n?void 0:n.from)||"",onChange:e=>w("smtp.from",e.target.value),className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"MyApp <noreply@myapp.com>"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Email Templates"})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Signup Template"}),(0,s.jsx)("textarea",{value:(null===(d=h.emailTemplates)||void 0===d?void 0:d.signup)||"",onChange:e=>w("emailTemplates.signup",e.target.value),className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Welcome to {{projectName}}! Please confirm your email."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password Reset Template"}),(0,s.jsx)("textarea",{value:(null===(c=h.emailTemplates)||void 0===c?void 0:c.reset)||"",onChange:e=>w("emailTemplates.reset",e.target.value),className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Click here to reset your password for {{projectName}}."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Invite Template"}),(0,s.jsx)("textarea",{value:(null===(o=h.emailTemplates)||void 0===o?void 0:o.invite)||"",onChange:e=>w("emailTemplates.invite",e.target.value),className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",rows:3,placeholder:"You have been invited to join {{projectName}}!"})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:C,disabled:!y||N.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:N.isPending?"Saving...":"Save Settings"})})]})}var J=a(9910),K=a(96010),Q=a(46715),G=a(76459);function Y(e){let{projectId:t}=e,{useApiQuery:a}=O(),[l,i]=(0,r.useState)(""),{data:n,isLoading:d,refetch:c}=a(t,"projects/".concat(t,"/auth/users"),{queryKey:["projects/".concat(t,"/auth/users")]}),o=((null==n?void 0:n.users)||[]).filter(e=>e.email.toLowerCase().includes(l.toLowerCase())||e.full_name&&e.full_name.toLowerCase().includes(l.toLowerCase())),x=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"Users"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your application users. View when they signed up, last signed in, and their verification status."})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"All Users"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"Search users...",className:"px-3 py-2 border dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o.length," ",1===o.length?"user":"users"]}),(0,s.jsx)("button",{onClick:()=>c(),className:"px-3 py-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:"Refresh"})]})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:d?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading users..."}):0===o.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(J.A,{size:48,className:"mx-auto mb-2 text-gray-300 dark:text-gray-600"}),(0,s.jsx)("p",{children:"No users found"}),l&&(0,s.jsx)("p",{className:"text-sm mt-1",children:"Try adjusting your search"})]}):(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Created"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Last Sign In"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:o.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:(0,s.jsx)(J.A,{size:20,className:"text-gray-500 dark:text-gray-400"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.email}),e.full_name&&(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.full_name})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:e.email_confirmed_at?(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400",children:[(0,s.jsx)(K.A,{size:12,className:"mr-1"}),"Verified"]}):(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400",children:[(0,s.jsx)(K.A,{size:12,className:"mr-1"}),"Unverified"]})})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(Q.A,{size:14}),x(e.created_at)]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(G.A,{size:14}),x(e.last_sign_in_at)]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsx)("button",{className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300",children:"View"})})]},e.id))})]})})]})]})}var X=a(7756),$=a(38144);function Z(e){let{projectId:t}=e,{useApiQuery:a,useApiMutation:l}=O(),[i,n]=(0,r.useState)({}),[d,c]=(0,r.useState)(!1),[o,x]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[h,u]=(0,r.useState)(new Set),{data:y,isLoading:p,refetch:b}=a(t,"secrets",{queryKey:["projects",t,"secrets"],queryFn:async()=>{let e=await fetch("/api/databasepad/proxy?endpoint=projects/".concat(t,"/secrets"),{headers:{"Content-Type":"application/json"}});if(!e.ok){if(404===e.status)return{keys:[],count:0};throw Error("Failed to fetch secrets")}return e.json()}}),j=l(t,"secrets/set","POST");(0,r.useEffect)(()=>{y&&n(e=>{let t={};return y.keys.forEach(a=>{t[a]=e[a]||""}),t})},[y]);let f=async()=>{if(o.trim()&&m.trim())try{await j.mutateAsync({action:"set",projectId:t,secretKey:o,secretValue:m}),x(""),g(""),c(!1),b()}catch(t){var e,a;alert((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.error)||"Failed to add secret")}},v=async e=>{if(confirm('Are you sure you want to delete the secret "'.concat(e,'"?')))try{await j.mutateAsync({action:"delete",projectId:t,secretKey:e}),b()}catch(e){var a,s;alert((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||"Failed to delete secret")}},k=async e=>{if(h.has(e))u(t=>{let a=new Set(t);return a.delete(e),a});else try{let a=await j.mutateAsync({action:"get",projectId:t,secretKey:e});void 0!==a.value&&n(t=>({...t,[e]:a.value})),u(t=>{let a=new Set(t);return a.add(e),a})}catch(e){console.error("Failed to fetch secret value:",e),alert("Failed to fetch secret value")}},N=(null==y?void 0:y.keys)||[];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"Secrets"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage environment variables for your edge functions. These are securely stored and injected at runtime."})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Environment Variables"}),(0,s.jsxs)("button",{onClick:()=>c(!d),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,s.jsx)(R.A,{size:16}),"Add Secret"]})]}),d&&(0,s.jsx)("div",{className:"px-6 py-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Key"}),(0,s.jsx)("input",{type:"text",value:o,onChange:e=>x(e.target.value.toUpperCase().replace(/[^A-Z0-9_]/g,"_")),placeholder:"SECRET_KEY",className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Value"}),(0,s.jsx)("input",{type:"password",value:m,onChange:e=>g(e.target.value),placeholder:"Secret value",className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:f,disabled:!o.trim()||!m.trim()||j.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:j.isPending?"Adding...":"Add Secret"}),(0,s.jsx)("button",{onClick:()=>{c(!1),x(""),g("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"})]})]})}),(0,s.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:p?(0,s.jsx)("div",{className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:"Loading secrets..."}):0===N.length?(0,s.jsxs)("div",{className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(E.A,{size:48,className:"mx-auto mb-2 text-gray-300 dark:text-gray-600"}),(0,s.jsx)("p",{children:"No secrets yet"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"Add environment variables for your edge functions"})]}):N.map(e=>(0,s.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-mono text-sm font-medium text-gray-900 dark:text-gray-100",children:e}),(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:h.has(e)?(0,s.jsx)("span",{className:"font-mono",children:i[e]}):""})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>k(e),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:h.has(e)?"Hide value":"Show value",children:h.has(e)?(0,s.jsx)(X.A,{size:16}):(0,s.jsx)($.A,{size:16})}),(0,s.jsx)("button",{onClick:()=>v(e),className:"p-2 text-red-400 hover:text-red-600 dark:hover:text-red-300",title:"Delete secret",children:(0,s.jsx)(q.A,{size:16})})]})]},e))})]})]})}var ee=a(97852);function et(e){let{projectId:t}=e,{useApiQuery:a,useApiMutation:l}=O(),[i,n]=(0,r.useState)(null),[d,c]=(0,r.useState)(""),[o,x]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[h,u]=(0,r.useState)(""),[y,p]=(0,r.useState)(!1),{data:b,isLoading:j,refetch:f}=a(t,"projects/".concat(t,"/functions"),{queryKey:["projects/".concat(t,"/functions")]}),v=(null==b?void 0:b.functions)||[],k=l(t,"functions/deploy");(0,r.useEffect)(()=>{i&&(N(i),p(!0))},[i]);let N=async e=>{try{let a=await fetch("/api/databasepad/proxy?projectId=".concat(t,"&endpoint=functions/").concat(e)),s=(await a.json()).code||w();c(s),x(s)}catch(e){console.error("Failed to fetch function code:",e),c(w()),x(w())}},w=()=>"export const corsHeaders = {\n  'Access-Control-Allow-Origin': '*',\n  'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type'\n}\n\nDeno.serve(async (req) => {\n  // Handle CORS preflight requests\n  if (req.method === 'OPTIONS') {\n    return new Response('ok', { headers: corsHeaders })\n  }\n\n  try {\n    // Your function logic here\n    const { name } = await req.json()\n\n    // Access environment variables with Deno.env.get()\n    const greetingPrefix = Deno.env.get(\"GREETING_PREFIX\") ?? \"Hello\"\n\n    const data = {\n      message: `${greetingPrefix} ${name}!`,\n      timestamp: new Date().toISOString()\n    }\n\n    return new Response(\n      JSON.stringify(data),\n      { headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n    )\n  } catch (error) {\n    return new Response(\n      JSON.stringify({ error: error.message }),\n      { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n    )\n  }\n})",C=async()=>{if(i)try{await k.mutateAsync({projectId:t,functionSlug:i,code:d}),x(d),alert("Function deployed successfully!")}catch(t){var e,a;alert((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.error)||"Failed to deploy function")}},S=async()=>{if(!h.trim())return;let e=h.toLowerCase().replace(/[^a-z0-9-]/g,"-");try{await k.mutateAsync({projectId:t,functionSlug:e,code:w()}),u(""),g(!1),f(),n(e)}catch(e){var a,s;alert((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||"Failed to create function")}},A=d!==o;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"Edge Functions"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Deploy serverless functions that run at the edge. Functions are written in TypeScript and run on Deno."})]}),(0,s.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,s.jsx)(R.A,{size:16}),"New Function"]})]}),m&&(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Create New Function"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",value:h,onChange:e=>u(e.target.value),placeholder:"function-name",className:"w-full px-3 py-2 border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:S,disabled:!h.trim()||k.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:k.isPending?"Creating...":"Create Function"}),(0,s.jsx)("button",{onClick:()=>{g(!1),u("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"})]})]})]}),j?(0,s.jsx)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading functions..."}):v&&0!==v.length?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(e=>(0,s.jsxs)("div",{onClick:()=>n(e.slug),className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(T.A,{className:"text-blue-600 dark:text-blue-400",size:24}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.slug})]})}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Click to view and edit function code"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:(0,s.jsxs)("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:["/functions/v1/",e.slug]})})]},e.slug))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(T.A,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No functions yet"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Create your first function to get started"})]})]}),y&&i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:i}),A&&(0,s.jsx)("span",{className:"text-sm text-orange-600 dark:text-orange-400",children:" Unsaved changes"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1.5 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",title:"Test function",children:[(0,s.jsx)(B.A,{size:16}),"Test"]}),(0,s.jsxs)("button",{onClick:C,disabled:!A||k.isPending,className:"flex items-center gap-2 px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:[(0,s.jsx)(ee.A,{size:16}),k.isPending?"Deploying...":"Deploy"]}),(0,s.jsx)("button",{onClick:()=>{p(!1),n(null),c(""),x("")},className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(U.A,{size:20})})]})]}),(0,s.jsxs)("div",{className:"p-6 flex-1 overflow-auto",children:[(0,s.jsxs)("div",{className:"mb-4 text-sm text-gray-600 dark:text-gray-400",children:["Function URL: ",(0,s.jsxs)("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:["https://",t,".databasepad.com/functions/v1/",i]})]}),(0,s.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),className:"w-full h-[500px] font-mono text-sm p-4 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-gray-900 text-gray-900 dark:text-gray-100",spellCheck:!1})]})]})})]})}var ea=a(73807),es=a(67906),er=a(62027),el=a(18453);function ei(e){let{projectId:t}=e,{useApiQuery:a}=O(),[l,i]=(0,r.useState)([]),[n,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)(new Set),[x,m]=(0,r.useState)("all"),{data:g,isLoading:h}=a(t,"projects/".concat(t,"/functions"),{queryKey:["projects/".concat(t,"/functions")]}),u=(null==g?void 0:g.functions)||[];(0,r.useEffect)(()=>{u&&u.length>0&&y()},[u]);let y=async()=>{if(u){d(!0);try{let e=u.map(async e=>{try{let a=await fetch("/api/databasepad/proxy?projectId=".concat(t,"&endpoint=functions/").concat(e.slug,"/logs"));return(await a.json()).logs||[]}catch(t){return console.error("Failed to fetch logs for ".concat(e.slug,":"),t),[]}}),a=(await Promise.all(e)).flat().sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());i(a)}catch(e){console.error("Failed to fetch logs:",e),i([])}finally{d(!1)}}},p=e=>{o(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},b="all"===x?l:l.filter(e=>e.functionSlug===x),j=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),f=e=>e>=200&&e<300?(0,s.jsx)(ea.A,{size:16,className:"text-green-500 dark:text-green-400"}):(0,s.jsx)(es.A,{size:16,className:"text-red-500 dark:text-red-400"});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"Function Logs"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"View invocation logs for all your edge functions. See request details, response data, and execution time."})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Invocation Logs"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"px-3 py-2 border dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[(0,s.jsx)("option",{value:"all",children:"All Functions"}),null==u?void 0:u.map(e=>(0,s.jsx)("option",{value:e.slug,children:e.slug},e.slug))]}),(0,s.jsx)("button",{onClick:y,disabled:n,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:n?"Refreshing...":"Refresh"})]})]})}),(0,s.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h||n?(0,s.jsxs)("div",{className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),"Loading logs..."]}):0===b.length?(0,s.jsxs)("div",{className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(P.A,{size:48,className:"mx-auto mb-2 text-gray-300 dark:text-gray-600"}),(0,s.jsx)("p",{children:"No logs found"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"all"===x?"Invoke a function to see logs here":"No logs for ".concat(x)})]}):b.map(e=>{var t,a,r,l,i,n,d,o,x,m;let g="".concat(e.timestamp,"-").concat(e.requestId),h=c.has(g);return(0,s.jsxs)("div",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsx)("div",{className:"px-6 py-4 cursor-pointer",onClick:()=>p(g),children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("button",{className:"mt-0.5",children:h?(0,s.jsx)(er.A,{size:16}):(0,s.jsx)(el.A,{size:16})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[f((null===(t=e.response)||void 0===t?void 0:t.statusCode)||0),(0,s.jsx)("span",{className:"font-mono text-sm font-medium text-gray-900 dark:text-gray-100",children:e.functionSlug}),(0,s.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat((null===(a=e.response)||void 0===a?void 0:a.statusCode)===200?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"),children:(null===(r=e.response)||void 0===r?void 0:r.statusCode)||"N/A"}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[null===(l=e.request)||void 0===l?void 0:l.method," ",null===(i=e.request)||void 0===i?void 0:i.path]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(G.A,{size:14}),j(e.timestamp)]}),(0,s.jsxs)("span",{className:"font-mono text-xs",children:["ID: ",e.requestId]})]})]})]})})}),h&&(0,s.jsxs)("div",{className:"px-6 pb-4 pl-16",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm mb-2 text-gray-900 dark:text-gray-100",children:"Request"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Method:"})," ",(0,s.jsx)("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:null===(n=e.request)||void 0===n?void 0:n.method})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Path:"})," ",(0,s.jsx)("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:null===(d=e.request)||void 0===d?void 0:d.path})]}),(null===(o=e.request)||void 0===o?void 0:o.body)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Body:"}),(0,s.jsx)("pre",{className:"mt-1 p-2 bg-white dark:bg-gray-900 rounded text-xs overflow-x-auto text-gray-900 dark:text-gray-100",children:"string"==typeof e.request.body?e.request.body:JSON.stringify(e.request.body,null,2)})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm mb-2 text-gray-900 dark:text-gray-100",children:"Response"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"})," ",(0,s.jsx)("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:null===(x=e.response)||void 0===x?void 0:x.statusCode})]}),(null===(m=e.response)||void 0===m?void 0:m.body)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Body:"}),(0,s.jsx)("pre",{className:"mt-1 p-2 bg-white dark:bg-gray-900 rounded text-xs overflow-x-auto text-gray-900 dark:text-gray-100",children:"string"==typeof e.response.body?e.response.body.substring(0,500):JSON.stringify(e.response.body,null,2)})]})]})]})]}),e.logs&&(0,s.jsxs)("div",{className:"mt-4 bg-gray-900 text-gray-100 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Console Output"}),(0,s.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:e.logs})]})]})]},g)})})]})]})}function en(e){let{projectId:t,projectApiKey:a}=e,[l,i]=(0,r.useState)("database"),n=[{id:"database",label:"Database",icon:C.A},{id:"storage",label:"File Buckets",icon:S.A},{id:"authentication",label:"Authentication",icon:A.A},{id:"users",label:"Users",icon:L.A},{id:"secrets",label:"Secrets",icon:E.A},{id:"functions",label:"Edge Functions",icon:T.A},{id:"logs",label:"Logs",icon:P.A}];return(0,s.jsxs)("div",{className:"flex min-h-[600px] overflow-hidden",children:[(0,s.jsxs)("div",{className:"w-64 text-gray-900 dark:text-white flex flex-col  bg-gray-700 rounded-lg",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("nav",{className:"space-y-1 px-4 pt-4",children:n.map(e=>{let t=e.icon;return(0,s.jsxs)("button",{onClick:()=>i(e.id),className:"w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ".concat(l===e.id?"bg-blue-600 text-white":"hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)(t,{size:20}),(0,s.jsx)("span",{children:e.label})]},e.id)})})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"border border-gray-300 dark:border-gray-600 px-3 py-3 rounded-2xl text-center backdrop-blur-sm",children:[(0,s.jsx)("div",{className:"text-xs opacity-60 font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Database ID:"}),(0,s.jsx)("div",{className:"font-mono text-xs font-medium text-gray-700 dark:text-gray-300 select-text break-all leading-tight",onClick:e=>{let t=window.getSelection(),a=document.createRange();a.selectNodeContents(e.currentTarget),null==t||t.removeAllRanges(),null==t||t.addRange(a)},children:t})]})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto bg-white dark:bg-gray-800",children:(0,s.jsxs)("div",{className:"p-6",children:["database"===l&&(0,s.jsx)(_,{projectId:t}),"storage"===l&&(0,s.jsx)(V,{projectId:t}),"authentication"===l&&(0,s.jsx)(H,{projectId:t}),"users"===l&&(0,s.jsx)(Y,{projectId:t}),"secrets"===l&&(0,s.jsx)(Z,{projectId:t}),"functions"===l&&(0,s.jsx)(et,{projectId:t}),"logs"===l&&(0,s.jsx)(ei,{projectId:t})]})})]})}function ed(e){let{projectData:t,subscriptionData:a,onProjectUpdate:r}=e;return t?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)("div",{className:"",children:(0,s.jsx)(en,{projectId:t.supabaseProjectId})})})}):null}function ec(){let e=(0,l.useRouter)(),{id:t}=e.query,{user:a,isAuthenticated:i,isLoading:d}=(0,o.A)(),[x,m]=(0,r.useState)(!0),[g,u]=(0,r.useState)(null),[y,p]=(0,r.useState)(null),[b,j]=(0,r.useState)("general"),[f,v]=(0,r.useState)(null),[k,C]=(0,r.useState)(!1),[S,A]=(0,r.useState)(!1),{isWhitelabel:L,whitelabelConfig:E}=(0,h.p)(),T=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/projects/".concat(t,"?files=no"));if(!e.ok)throw Error("Failed to fetch project data");let a=await e.json();u(a.project),"mobile"===a.project.platform&&j("general"),m(!1)}catch(e){console.error("Error fetching project:",e),p("Could not load project details"),m(!1)}},[t]),P=(0,r.useCallback)(async()=>{try{C(!0);let e=await fetch("/api/subscription");if(e.ok){let t=await e.json();t.subscription&&v(t.subscription)}else console.error("Failed to fetch subscription data")}catch(e){console.error("Error fetching subscription data:",e)}finally{C(!1)}},[]);(0,r.useEffect)(()=>{if(!d&&!i){e.push("/login");return}!d&&i&&t&&(T(),P())},[d,i,e,t,T,P]),(0,r.useEffect)(()=>{let e=window.location.hash.replace("#","");"general"===e||"analytics"===e||"database"===e?j(e):j("general")},[]);let F=e=>{j(e),window.history.pushState(null,"","#".concat(e))};return((0,r.useEffect)(()=>{let e=()=>{A(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),d||x)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("svg",{className:"animate-spin h-10 w-10 text-blue-500 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("p",{className:"text-gray-300",children:"Loading project settings..."})]})}):y?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-red-500 mb-4",children:(0,s.jsx)("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,s.jsx)("p",{className:"text-gray-300 text-xl font-medium mb-4",children:y}),(0,s.jsx)("button",{onClick:()=>e.push("/"),className:"bg-blue-600 text-white px-4 py-2 rounded-md",children:"Go Home"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsxs)(n(),{children:[(0,s.jsxs)("title",{children:["Project Settings - ",(null==g?void 0:g.slug)||t]}),(0,s.jsx)("meta",{name:"description",content:"Manage your project settings"})]}),S?(0,s.jsx)("header",{className:"bg-gray-900 py-4",children:(0,s.jsxs)("div",{className:"px-4",children:[(0,s.jsx)("div",{className:"mb-2",children:L?(0,s.jsxs)(c(),{href:(null==E?void 0:E.homepageEnabled)===!0?"/":"/dashboard",className:"flex items-center",children:[(null==E?void 0:E.wordmark)&&(0,s.jsx)("img",{className:"wl-hook-homepage-site-logo-image",src:E.wordmark,alt:(null==E?void 0:E.siteName)||"Platform",width:120}),!(null==E?void 0:E.wordmark)&&(null==E?void 0:E.logo)&&(0,s.jsx)("img",{className:"wl-hook-homepage-site-logo-image",src:E.logo,alt:(null==E?void 0:E.siteName)||"Platform",width:25}),!(null==E?void 0:E.wordmark)&&!(null==E?void 0:E.logo)&&(null==E?void 0:E.siteName)&&(0,s.jsx)("div",{className:"wl-hook-sitename-text text-white text-2xl font-bold",children:E.siteName})]}):(0,s.jsx)(c(),{href:"/",className:"flex items-center",children:(0,s.jsx)("img",{src:"/famous_tp_black.png",alt:"Famous.ai",width:120,className:"brightness-0 invert"})})}),(0,s.jsxs)("div",{className:"flex items-center text-sm",children:[(0,s.jsx)(c(),{href:"/project/".concat(t),className:"text-blue-400 hover:text-blue-300 truncate max-w-[180px]",children:(null==g?void 0:g.slug)||"Project"}),(0,s.jsx)("span",{className:"mx-2 text-gray-400",children:"/"}),(0,s.jsx)("span",{className:"text-gray-300",children:"Settings"})]})]})}):(0,s.jsx)("header",{className:"bg-gray-900 py-4",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center",children:[L?(0,s.jsx)(c(),{href:(null==E?void 0:E.homepageEnabled)===!0?"/":"/dashboard",className:"flex items-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(null==E?void 0:E.wordmark)&&(0,s.jsx)("img",{className:"wl-hook-homepage-site-logo-image",src:E.wordmark,alt:(null==E?void 0:E.siteName)||"Platform",width:140}),!(null==E?void 0:E.wordmark)&&(null==E?void 0:E.logo)&&(0,s.jsx)("img",{className:"wl-hook-homepage-site-logo-image",src:E.logo,alt:(null==E?void 0:E.siteName)||"Platform",width:30}),!(null==E?void 0:E.wordmark)&&!(null==E?void 0:E.logo)&&(null==E?void 0:E.siteName)&&(0,s.jsx)("div",{className:"wl-hook-sitename-text text-white text-2xl font-bold",children:E.siteName})]})}):(0,s.jsx)(c(),{href:"/",className:"flex items-center",children:(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("img",{src:"/famous_tp_black.png",alt:"Famous.ai",width:140,className:"brightness-0 invert"})})}),(0,s.jsxs)("div",{className:"ml-4 flex items-center",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"/"}),(0,s.jsx)(c(),{href:"/project/".concat(t),className:"ml-2 text-blue-400 hover:text-blue-300",children:(null==g?void 0:g.slug)||"Project"}),(0,s.jsx)("span",{className:"ml-2 text-gray-400",children:"/"}),(0,s.jsx)("span",{className:"ml-2 text-gray-300",children:"Settings"})]})]})})}),(0,s.jsx)("main",{className:"py-10",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Project Settings"}),"mobile"!==g.platform&&(0,s.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:(0,s.jsxs)("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto no-scrollbar sm:overflow-x-visible pr-4 sm:pr-0",children:[(0,s.jsx)("button",{onClick:()=>F("general"),className:"py-4 px-1 border-b-2 font-medium text-sm flex-shrink-0 whitespace-nowrap ".concat("general"===b?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"General"]})}),(0,s.jsx)("button",{onClick:()=>F("analytics"),className:"py-4 px-1 border-b-2 font-medium text-sm flex-shrink-0 whitespace-nowrap ".concat("analytics"===b?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Analytics"]})}),g.supabaseProjectId&&(!0===g.isInternalSupabase||!0===g.isInternalDatabase)&&(0,s.jsx)("button",{onClick:()=>F("database"),className:"py-4 px-1 border-b-2 font-medium text-sm flex-shrink-0 whitespace-nowrap ".concat("database"===b?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[(0,s.jsx)("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),(0,s.jsx)("path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}),(0,s.jsx)("path",{d:"M3 12A9 3 0 0 0 21 12"})]}),"Database"]})})]})}),"general"===b&&(0,s.jsx)(N,{projectData:g,subscriptionData:f,onProjectUpdate:T}),"analytics"===b&&(0,s.jsx)(w,{projectData:g,onProjectUpdate:T}),"database"===b&&(0,s.jsx)(ed,{projectData:g,subscriptionData:f,onProjectUpdate:T})]})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1106,2146,2928,6625,804,6191,2935,636,6593,8792],()=>t(49e3)),_N_E=e.O()}]);