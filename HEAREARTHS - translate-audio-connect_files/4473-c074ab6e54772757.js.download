"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4473],{4473:(e,o,t)=>{t.r(o),t.d(o,{default:()=>k});var l=t(74848),a=t(96540),r=t(86715),i=t(13368),s=t.n(i),n=t(4269),c=t(56191),m=t(46059),d=t(804),h=t(64705),p=t(43442),g=t(28266),u=t(91106),x=t.n(u),f=t(65253);let w=e=>{let{onPromptSubmit:o,isLoading:t,initialPromptValue:r,onPresetClick:i,whitelabelConfig:s,onPublicToggle:n,onBuildModeToggle:c}=e,m=(0,a.useRef)(null),[d,h]=(0,a.useState)([]);return((0,a.useEffect)(()=>{(null==s?void 0:s.homepagePrompts)&&0!==s.homepagePrompts.length&&h([...s.homepagePrompts].sort(()=>.5-Math.random()).slice(0,4))},[null==s?void 0:s.homepagePrompts]),(null==s?void 0:s.homepageEnabled)!==!0)?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)("section",{ref:m,className:"relative overflow-hidden flex flex-col h-screen min-h-[800px] sm:min-h-screen wl-hook-homepage-container",style:{backgroundColor:(null==s?void 0:s.primaryColor)||"#111827"},children:[(0,l.jsx)("div",{className:"relative z-50 wl-hook-homepage-header",children:(0,l.jsx)("div",{className:"max-w-full mx-auto px-4 py-4 wl-hook-wordmark-homepage-outer-container",children:(0,l.jsxs)("div",{className:"flex items-center justify-between h-8 wl-hook-wordmark-homepage-inner-container",children:[(0,l.jsx)(x(),{href:"/",className:"flex items-center wl-hook-wordmark-homepage",children:(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[s.wordmark&&(0,l.jsx)("img",{className:"wl-hook-homepage-site-logo-image",src:s.wordmark,alt:(null==s?void 0:s.siteName)||"Platform",width:140}),!(null==s?void 0:s.wordmark)&&(null==s?void 0:s.logo)&&(0,l.jsx)("img",{className:"wl-hook-homepage-site-logo-image",src:s.logo,alt:(null==s?void 0:s.siteName)||"Platform",width:30}),!(null==s?void 0:s.wordmark)&&!(null==s?void 0:s.logo)&&(null==s?void 0:s.siteName)&&(0,l.jsx)("div",{className:"wl-hook-sitename-text text-white text-2xl font-bold",children:s.siteName})]})}),(0,l.jsx)(f.A,{})]})})}),(0,l.jsxs)("div",{className:"relative z-20 container mx-auto px-4 flex flex-col justify-center h-[calc(100vh-80px)] min-h-[700px] sm:min-h-[calc(100vh-80px)] wl-hook-homepage-content",children:[(0,l.jsxs)("div",{className:"w-full max-w-4xl mx-auto text-center wl-hook-homepage-prompt-section",children:[(0,l.jsx)("h3",{className:"text-5xl xs:text-5xl sm:text-6xl md:text-6xl font-extrabold text-white mb-6 wl-hook-homepage-title-container",children:(0,l.jsx)("span",{className:"text-gray-300 wl-hook-homepage-title",children:(null==s?void 0:s.homepageTitle)||""})}),(0,l.jsx)("p",{className:"text-lg sm:text-xl md:text-xl text-gray-300 mb-8 sm:mb-12 max-w-3xl mx-auto wl-hook-homepage-description",children:(null==s?void 0:s.homepageDescription)||""}),(0,l.jsx)("div",{className:"mb-8 sm:mb-12",children:(0,l.jsx)(g.A,{onSubmit:o,isLoading:t,initialValue:r,onPublicToggle:n,onBuildModeToggle:c})})]}),(0,l.jsx)("div",{className:"w-full max-w-4xl mx-auto wl-hook-homepage-presets-container",children:(0,l.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 wl-hook-homepage-presets-grid",children:d.map((e,o)=>(0,l.jsx)("button",{className:"px-4 py-2 bg-gray-800 rounded-xl text-gray-300 hover:bg-gray-700 transition-colors border border-gray-600 hover:border-gray-600 flex items-center justify-center shadow-lg wl-hook-homepage-preset-button",onClick:()=>i(e.prompt),children:(0,l.jsx)("span",{className:"wl-hook-homepage-preset-button-text",children:e.text})},o))})})]})]})},v=e=>{var o;let{whitelabelConfig:t}=e,a=new Date().getFullYear();return(0,l.jsx)("footer",{className:"overflow-hidden relative border-t border-gray-800 wl-hook-homepage-footer",style:{backgroundColor:(null==t?void 0:t.primaryColor)||""},children:(0,l.jsxs)("div",{className:"container mx-auto px-6 py-6 wl-hook-homepage-footer-content",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-6 wl-hook-homepage-footer-content-inner",children:[(0,l.jsxs)("div",{className:"flex-shrink-0 wl-hook-homepage-footer-logo-container",children:[(0,l.jsxs)(x(),{href:"/",className:"inline-block wl-hook-homepage-footer-logo-link",children:[t.wordmark&&(0,l.jsx)("img",{className:"wl-hook-homepage-footer-logo-image",src:t.wordmark,alt:(null==t?void 0:t.siteName)||"Platform",width:140}),!(null==t?void 0:t.wordmark)&&(null==t?void 0:t.logo)&&(0,l.jsx)("img",{className:"wl-hook-homepage-footer-logo-image",src:t.logo,alt:(null==t?void 0:t.siteName)||"Platform",width:30}),!(null==t?void 0:t.wordmark)&&!(null==t?void 0:t.logo)&&(null==t?void 0:t.siteName)&&(0,l.jsx)("div",{className:"wl-hook-homepage-footer-logo-text text-white text-2xl font-bold",children:t.siteName})]}),(0,l.jsx)("p",{className:"mt-3 text-gray-400 text-md wl-hook-homepage-footer-description",children:(null==t?void 0:t.homepageDescription)||""})]}),(0,l.jsx)("div",{className:"flex flex-col md:flex-row md:flex-wrap gap-x-6 gap-y-2 wl-hook-homepage-footer-links-container",children:null==t?void 0:null===(o=t.homepageFooterLinks)||void 0===o?void 0:o.map(e=>(0,l.jsx)("a",{href:e.url,target:e.newTab?"_blank":"_self",className:"text-gray-400 hover:text-white transition-colors text-md whitespace-nowrap wl-hook-homepage-footer-link",children:e.title},e.title))})]}),(0,l.jsx)("div",{className:"border-t border-gray-800 mt-6 pt-4 wl-hook-homepage-footer-copyright-container",children:(0,l.jsxs)("p",{className:"text-gray-400 text-sm wl-hook-homepage-footer-copyright-text",children:["\xa9 ",a," ",(null==t?void 0:t.siteName)||"",". All rights reserved."]})})]})})};function k(){let e=(0,r.useRouter)(),[o,t]=(0,a.useState)(!1),[i,g]=(0,a.useState)(!1),[u,x]=(0,a.useState)(""),[f,k]=(0,a.useState)(""),{isAuthenticated:j}=(0,m.A)(),[b,y]=(0,a.useState)(!1),[N,C]=(0,a.useState)(null),[P,E]=(0,a.useState)(!1),{isWhitelabel:S,isClient:F,whitelabelConfig:T}=(0,p.p)();(0,a.useEffect)(()=>{{let e=localStorage.getItem("pendingPrompt");e&&k(e)}},[j]);let A=(0,a.useCallback)(async()=>{if(!j)return;let e=h.A.referredBy();if(e)try{(await fetch("/api/users/referred-by",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referredBy:e})})).ok||console.error("Failed to update referredBy")}catch(e){console.error("Error updating referredBy:",e)}},[j]),_=(0,a.useCallback)(async()=>{if(j)try{E(!0);let e=await fetch("/api/subscription");if(e.ok){let o=await e.json();o.subscription&&C(o.subscription)}else console.error("Failed to fetch subscription data")}catch(e){console.error("Error fetching subscription data:",e)}finally{E(!1)}},[j]);(0,a.useEffect)(()=>{_(),A()},[_,j,A]);let I=(0,a.useCallback)(e=>!1!==e||j&&N?!1!==e||null!=N&&!!N.tier&&(null==N?void 0:N.tier)!==d.i.FREE||(y(!0),!1):(console.error("User not authenticated in whitelabel mode"),g(!0),!1),[N,j]),L=(0,a.useCallback)(e=>!0!==e||j&&N?!0!==e||null!=N&&!!N.tier&&(null==N?void 0:N.tier)!==d.i.FREE||(y(!0),!1):(console.error("User not authenticated in whitelabel mode"),!1),[N,j]),B=(0,a.useCallback)(async(o,l,a,r)=>{if(!j){x(o),g(!0);return}t(!0);try{let i=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:o,attachments:l||[],platform:a||"website",isPublic:void 0===r||r})});if(402===i.status&&(await i.json()).requiresUpgrade){y(!0),t(!1);return}if(!i.ok)throw Error("Failed to create project");let s=await i.json(),n=s.project._id,c=s.project.activeMessageId;localStorage.removeItem("pendingPrompt"),localStorage.setItem("activeMessageId:".concat(n),c),e.push("/project/".concat(n))}catch(e){console.error("Error creating project:",e),alert("Failed to create project. Please try again."),t(!1)}},[j,e]);return((0,a.useEffect)(()=>{S&&F&&T&&!0!==T.homepageEnabled&&e.push("/dashboard")},[S,e,F,T]),(null==T?void 0:T.homepageEnabled)===!0)?(0,l.jsxs)("div",{style:{backgroundColor:(null==T?void 0:T.primaryColor)||""},children:[(0,l.jsxs)(s(),{children:[(0,l.jsxs)("title",{children:[(null==T?void 0:T.siteName)||""," - ",(null==T?void 0:T.homepageTitle)||""]}),(0,l.jsx)("meta",{name:"description",content:(null==T?void 0:T.homepageDescription)||""})]}),(0,l.jsx)("main",{children:(0,l.jsx)(w,{onPromptSubmit:B,isLoading:o,initialPromptValue:f,onPresetClick:e=>{k(e),localStorage.setItem("pendingPrompt",e)},whitelabelConfig:T,onPublicToggle:I,onBuildModeToggle:L})}),(null==T?void 0:T.homepageFooterLinks)&&(null==T?void 0:T.homepageFooterLinks.length)>0&&(0,l.jsx)(v,{whitelabelConfig:T}),(0,l.jsx)(n.A,{isOpen:i,onClose:()=>g(!1),prompt:u}),N&&(0,l.jsx)(c.A,{isOpen:b,onClose:()=>{y(!1)},currentTier:N.tier,currentUsage:N.messageCount,currentLimit:N.limit,subscriptionData:N})]}):(0,l.jsx)(l.Fragment,{})}}}]);