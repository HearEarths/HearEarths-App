"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8266],{86704:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(74848),s=r(96540),o=r(56318);let l=(0,s.forwardRef)((e,t)=>{let{onImagesUploaded:r,maxFiles:l=20,showPreview:n=!0}=e,[i,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(null),p=(0,s.useRef)(null),g=(0,o.VB)(),f=(0,s.useRef)(null),x=(0,s.useRef)([]),b=(0,s.useCallback)(async e=>{if(0===e.length)return;console.log("ImageUpload: Uploading ".concat(e.length," files")),u(!0),m(null);let t=[...x.current];try{for(let r of e){let e=await fetch("/api/uploads/signed-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileType:r.type,fileName:r.name||"image-".concat(Date.now(),".").concat(r.type.split("/")[1])})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to get signed URL")}let{signedUrl:a,fileUrl:s}=await e.json();if(!(await fetch(a,{method:"PUT",body:r,headers:{"Content-Type":r.type},mode:"cors"})).ok)throw Error("Failed to upload file to S3");t.push(s)}c(t),r([...t])}catch(e){console.error("Upload error:",e),m(e instanceof Error?e.message:"An unknown error occurred")}finally{u(!1)}},[r]),y=(0,s.useRef)(b);(0,s.useEffect)(()=>{y.current=b},[b]),(0,s.useEffect)(()=>{x.current=i},[i]),(0,s.useEffect)(()=>{if(!f.current)return f.current=g.registerHandler({uploadFiles:async e=>(console.log("GlobalDropzone called ImageUpload handler with",e.length,"files"),y.current(e))}),()=>{f.current&&(g.unregisterHandler(f.current),f.current=null)}},[g]),(0,s.useImperativeHandle)(t,()=>({uploadFiles:b}));let w=e=>{let t=[...i];t.splice(e,1),c(t),r(t)},v=(0,s.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&e.dataTransfer.files.length>0){let t=Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("image/")&&e.size<=5242880);t.length>0&&b(t)}},[b]);return(0,a.jsxs)("div",{className:"p-4",onDragOver:e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"},onDragEnter:e=>{e.preventDefault(),e.stopPropagation()},onDrop:v,children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center cursor-pointer rounded-md px-3 py-1.5 text-sm bg-gray-700 text-white hover:bg-gray-600 transition ".concat(d?"opacity-50 cursor-not-allowed":""),children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),d?"Uploading...":"Add Images",(0,a.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",multiple:!0,onChange:e=>{var t;if(m(null),!(null===(t=e.target.files)||void 0===t?void 0:t.length))return;if(i.length+e.target.files.length>l){m("You can only upload a maximum of ".concat(l," images."));return}let r=Array.from(e.target.files).filter(e=>{let t=["image/jpeg","image/png","image/gif","image/webp"].includes(e.type);return t||m("Only JPEG, PNG, GIF, or WebP images are allowed."),t});if(r.filter(e=>e.size>5242880).length>0){m("Some files exceed the 5MB limit and were not added.");let e=r.filter(e=>e.size<=5242880);e.length>0&&b(e)}else r.length>0&&b(r);p.current&&(p.current.value="")},className:"hidden",ref:p,disabled:d})]})}),h&&(0,a.jsx)("div",{className:"text-red-500 text-sm mt-2",children:h}),n&&i.length>0&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map((e,t)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded overflow-hidden flex items-center justify-center",children:(0,a.jsx)("img",{src:e,alt:"Uploaded ".concat(t),className:"w-full h-full object-cover"})}),(0,a.jsx)("button",{onClick:()=>w(t),className:"absolute -top-1 -right-1 bg-gray-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-gray-600",children:(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))})})]})});l.displayName="ImageUpload";let n=l},28266:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(74848),s=r(96540),o=r(86704),l=r(43442);let n=e=>{let{onSubmit:t,isLoading:r=!1,initialValue:n="",onPublicToggle:i,onBuildModeToggle:c}=e,[d,u]=(0,s.useState)(n),[h,m]=(0,s.useState)([]),[p,g]=(0,s.useState)(!1),[f,x]=(0,s.useState)("website"),[b,y]=(0,s.useState)(null),[w,v]=(0,s.useState)(!0),[j,N]=(0,s.useState)(!1),[k,M]=(0,s.useState)(()=>{{let e=localStorage.getItem("chatMaxMode");return!!e&&JSON.parse(e)}}),[C,S]=(0,s.useState)(()=>{{let e=localStorage.getItem("chatGeniusMode");return!!e&&JSON.parse(e)}}),[E,L]=(0,s.useState)(!1),[z,I]=(0,s.useState)(!1),P=(0,s.useRef)(null),D=(0,s.useRef)(null),{isWhitelabel:B,whitelabelConfig:W}=(0,l.p)();(0,s.useEffect)(()=>{u(n)},[n]),(0,s.useEffect)(()=>{P.current&&(P.current.focus(),P.current.style.height="auto",P.current.style.height="".concat(P.current.scrollHeight,"px"))},[d]),(0,s.useEffect)(()=>{localStorage.setItem("chatMaxMode",JSON.stringify(k))},[k]),(0,s.useEffect)(()=>{localStorage.setItem("chatGeniusMode",JSON.stringify(C))},[C]);let A=()=>{d.trim()&&!r&&(localStorage.setItem("pendingPrompt",d),t(d,h.length>0?h:void 0,f,w,k,C))},H=async e=>{let{items:t}=e.clipboardData;for(let r=0;r<t.length;r++)if(-1!==t[r].type.indexOf("image")){let a=t[r].getAsFile();if(a&&D.current){e.preventDefault(),g(!0);try{await D.current.uploadFiles([a])}catch(e){console.error("Error pasting image:",e)}finally{g(!1)}}break}};return(0,a.jsx)("div",{className:"w-full max-w-3xl mx-auto",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("label",{className:"flex items-center cursor-pointer group select-none opacity-60 hover:opacity-100 transition-opacity",onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),children:[(0,a.jsx)("span",{className:"text-xs text-gray-400 group-hover:text-gray-200 transition-colors mr-2",children:"Bulldozer"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:k,onChange:e=>{c(e.target.checked)&&M(e.target.checked)}}),(0,a.jsx)("div",{className:"w-8 h-4 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-4 peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-blue-600"})]})]}),E&&(0,a.jsxs)("div",{className:"absolute bottom-full left-0 mb-2 px-2 py-1 bg-gray-700 text-white text-xs rounded shadow-lg border border-gray-700 z-10 w-56",children:["Bulldozer mode allows for long-running changes with deep thinking and meticulous implementation. Perfect for complex, multi-step tasks, or long prompts.",(0,a.jsx)("div",{className:"absolute top-full left-8 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-700"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("label",{className:"flex items-center cursor-pointer group select-none opacity-60 hover:opacity-100 transition-opacity",onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[(0,a.jsx)("span",{className:"text-xs text-gray-400 group-hover:text-gray-200 transition-colors mr-2",children:"Genius"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:C,onChange:e=>{c(e.target.checked)&&S(e.target.checked)}}),(0,a.jsx)("div",{className:"w-8 h-4 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-4 peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-blue-600"})]})]}),z&&(0,a.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-700 text-white text-xs rounded shadow-lg border border-gray-700 z-10 w-56 whitespace-normal",children:["Genius mode provides enhanced reasoning and problem-solving capabilities for tackling challenging tasks. It's more expensive, so use judiciously.",(0,a.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-700"})]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("label",{className:"inline-flex items-center cursor-pointer opacity-60 hover:opacity-100 transition-opacity",onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:[(0,a.jsx)("span",{className:"mr-2 text-xs font-medium ".concat(w?"text-gray-500":"text-gray-400"),children:"Private"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:w,onChange:e=>{i(e.target.checked)&&v(e.target.checked)}}),(0,a.jsx)("div",{className:"w-8 h-4 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-4 peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-gray-600"})]}),(0,a.jsx)("span",{className:"ml-2 text-xs font-medium ".concat(w?"text-gray-400":"text-gray-500"),children:"Public"})]}),j&&(0,a.jsxs)("div",{className:"absolute bottom-full right-0 mb-2 px-2 py-1 bg-gray-700 text-white text-xs rounded shadow-lg border border-gray-700 z-10 w-80",children:["Public projects can be featured on the ",B?"".concat((null==W?void 0:W.siteName)?"".concat(W.siteName):"platform"):"Famous.ai"," homepage, giving you extra visibility and helping more people discover your work. You can switch between public and private at any time.",(0,a.jsx)("div",{className:"absolute top-full right-14 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-700"})]})]})]}),(0,a.jsx)("div",{className:"animated-border-container",children:(0,a.jsxs)("div",{className:"animated-border-content",children:[(0,a.jsxs)("div",{className:"flex items-start p-4",children:[(0,a.jsx)("textarea",{ref:P,placeholder:"I want to build a...",value:d,onChange:e=>{u(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),A())},onPaste:H,className:"flex-1 bg-transparent border-none outline-none resize-none text-gray-100 min-h-[60px] text-lg focus:ring-0 focus:outline-none",style:{maxHeight:"300px"},disabled:r,rows:2}),(0,a.jsx)("button",{onClick:A,disabled:!d.trim()||r,className:"ml-2 ".concat(!d.trim()||r?"bg-gray-600 cursor-not-allowed":B?"":"bg-gradient-to-r from-orange-500 to-purple-600 hover:from-orange-600 hover:to-purple-700"," text-white rounded-full w-12 h-12 flex items-center justify-center transition-all ease-in-out duration-200 shadow-lg"),"aria-label":"Submit prompt",style:{backgroundColor:B&&!(!d.trim()||r)?(null==W?void 0:W.tertiaryColor)||"":void 0},children:r?(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-end",children:[(0,a.jsx)(o.A,{ref:D,onImagesUploaded:e=>{m(e)}}),(0,a.jsx)("div",{className:"p-3",children:(0,a.jsxs)("div",{className:"flex bg-gray-800 rounded-lg p-0.5",children:[(0,a.jsxs)("button",{onClick:()=>x("website"),onMouseEnter:()=>y("website"),onMouseLeave:()=>y(null),className:"relative px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-100 flex items-center ".concat("website"===f?"bg-gray-700 text-white shadow-md":"text-gray-400 hover:text-gray-300"),children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"website"===b&&(0,a.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-700 text-white text-xs rounded shadow-lg border border-gray-700 whitespace-nowrap z-10",children:["Website",(0,a.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-700"})]})]}),(0,a.jsxs)("button",{onClick:()=>x("mobile"),onMouseEnter:()=>y("mobile"),onMouseLeave:()=>y(null),className:"relative px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-100 flex items-center ".concat("mobile"===f?"bg-gray-700 text-white shadow-md":"text-gray-400 hover:text-gray-300"),children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"mobile"===b&&(0,a.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-700 text-white text-xs rounded shadow-lg border border-gray-700 whitespace-nowrap z-10",children:["Mobile App",(0,a.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-700"})]})]}),(0,a.jsxs)("button",{onClick:()=>x("crypto"),onMouseEnter:()=>y("crypto"),onMouseLeave:()=>y(null),className:"relative px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-100 flex items-center ".concat("crypto"===f?"bg-gray-700 text-white shadow-md":"text-gray-400 hover:text-gray-300"),children:[(0,a.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h8M10 8l4 8M14 8l-4 8"})]}),"crypto"===b&&(0,a.jsxs)("div",{className:"absolute bottom-full right-0 mb-2 px-2 py-1 bg-gray-700 text-white text-xs rounded shadow-lg border border-gray-700 whitespace-nowrap z-10",children:["Crypto",(0,a.jsx)("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-700"})]})]})]})})]})]})})]})})}}}]);